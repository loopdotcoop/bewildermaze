<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <title>Canvas Path Test</title>
    
    <script type='text/javascript'>
    
    var mouse_drag_x = 0, mouse_drag_y = 0;
    var last_mouse_drag_x = -1, last_mouse_drag_y = -1;
    var mouse_button = 0;
    var mouse_dragging = false;
    
    var pen_col = "#ffffff";
    var pen_size = 16;
    var bg_col = "#000000";
    
    function clearImage(col)
    {
        var myCanvas = document.getElementById("myCanvas");
        
        // redraw the canvas...
        var context = myCanvas.getContext("2d");
        context.fillStyle = col;
        context.fillRect(0, 0, myCanvas.width, myCanvas.height);
        
        context.lineWidth = 1.0;
        context.lineCap = "round";

        //context.beginPath();
        //context.strokeStyle = "#000000";
        //context.strokeRect(0, 0, 256, 256);
        
    // FIXME: Not the final interface
        myCanvas.parentNode._x3domNode.invalidateGLObject();
    }
    
    function main() 
    {
        var myCanvas = document.getElementById("myCanvas");
        
        initCanvas(myCanvas);
        
        // redraw the canvas...
        var context = myCanvas.getContext("2d");
        context.fillStyle = 'rgb(40,40,40)';
        context.fillRect(0, 0, myCanvas.width, myCanvas.height);
        context.lineCap = "round";
    }
    
    function updateImage(canvas)
    {
        var context = canvas.getContext("2d");
        //context.fillStyle = 'rgb(255,255,255)';
        //context.fillRect(0, 0, canvas.width, canvas.height);
        
        if (!mouse_dragging)
            return;
        
        if (last_mouse_drag_x < 0 || last_mouse_drag_y < 0)
        {
            last_mouse_drag_x = mouse_drag_x;
            last_mouse_drag_y = mouse_drag_y;
            return;
        }
        
        // redraw the canvas...
        context.lineWidth = pen_size;

        context.beginPath();
        //context.strokeStyle = "#804020";
        context.strokeStyle = pen_col;
    
        // Draw a line
        context.moveTo(last_mouse_drag_x, last_mouse_drag_y);
        context.lineTo(mouse_drag_x, mouse_drag_y);
        context.stroke();
        
    // FIXME: Not the final interface
        canvas.parentNode._x3domNode.invalidateGLObject();
        
        last_mouse_drag_x = mouse_drag_x;
        last_mouse_drag_y = mouse_drag_y;
    }
    
    // add event listeners
    function initCanvas(canvas)
    {
      canvas.addEventListener('mousedown', function (evt) {
      switch(evt.button) {
        case 0:  mouse_button = 1; break;  //left
        case 1:  mouse_button = 4; break;  //middle
        case 2:  mouse_button = 2; break;  //right
        default: mouse_button = 0; break;
      }
      mouse_drag_x = evt.layerX;
      mouse_drag_y = evt.layerY;
      mouse_dragging = true;
      
      if (evt.shiftKey) { mouse_button = 1; }
      if (evt.ctrlKey)  { mouse_button = 4; }
      if (evt.altKey)   { mouse_button = 2; }
            
            updateImage(canvas);
      
      window.status='DOWN: '+evt.layerX+", "+evt.layerY;
      evt.preventDefault();
      evt.stopPropagation();
      evt.returnValue = false;
    }, false);
    
    canvas.addEventListener('mouseup', function (evt) {
      mouse_button = 0;
      mouse_dragging = false;
            last_mouse_drag_x = -1;
            last_mouse_drag_y = -1;
            
            updateImage(canvas);
      
      evt.preventDefault();
      evt.stopPropagation();
      evt.returnValue = false;
    }, false);
    
    canvas.addEventListener('mouseout', function (evt) {
      mouse_button = 0;
      mouse_dragging = false;
            last_mouse_drag_x = -1;
            last_mouse_drag_y = -1;
            
            updateImage(canvas);
      
      evt.preventDefault();
      evt.stopPropagation();
      evt.returnValue = false;
    }, false);
    
    canvas.addEventListener('mousemove', function (evt) {
      window.status='MOVE: '+evt.layerX+", "+evt.layerY;
      
      if (!mouse_dragging) {
        return;
            }
      
            mouse_drag_x = evt.layerX;
      mouse_drag_y = evt.layerY;
      
      if (evt.shiftKey) { mouse_button = 1; }
      if (evt.ctrlKey)  { mouse_button = 4; }
      if (evt.altKey)   { mouse_button = 2; }
            
            updateImage(canvas);
      
      evt.preventDefault();
      evt.stopPropagation();
      evt.returnValue = false;
    }, false);
    }
    </script>
    
    <style>
        #ctrlContainer { position: absolute; top:285px; left:775px; padding: 0px; width: 280px; }
        #sliderContainer div { float:left; width: 200px; }
        #sliderContainer li { height: 20px; }
        #sliderContainer ul { clear: both; list-style-type: none; margin: 10px 0 10px 0; padding: 0; }
    </style>
    
    <link rel='stylesheet' type='text/css' href='x3dom.css'>
    <link type="text/css" href="../lib/jquery-ui-1.11.3/jquery-ui.css" rel="stylesheet">
</head>

<body onload='main();' style="background-color:#111; color: #999;">
  <x3d id="aScene" showStat="false" showLog="false" x="0px" y="0px" width="500px" height="640px">
    <scene>
      <background skyColor='0 0 0'></background>
      <NavigationInfo type="examine"></NavigationInfo>
      <Viewpoint position="2.09873 -1.08607 .5" orientation="0.75664 0.47185 0.45261 1.83860" description=""></Viewpoint>
      <shape>
        <appearance>
          <texture hideChildren="false">
            <canvas width='256' height='256' id='myCanvas' style="border: solid 1px black; position:absolute; top:20px;left:520px;">
          </texture>
          <material diffuseColor='0.6 0.9 0.5'></material>  
        </appearance>
        <IndexedFaceSet creaseAngle='0.5' solid='false' coordIndex='0 1 2 -1 3 4 5 -1 6 7 8 -1 9 10 11 -1 8 12 6 -1 13 6 12 -1 14 15 16 -1 17 15 0 -1 18 19 20 -1 21 22 18 -1 23 5 24 -1 12 25 13 -1 1 26 2 -1 27 10 28 -1 29 27 30 -1 31 32 10 -1 27 29 10 -1 11 10 32 -1 33 34 35 -1 4 21 18 -1 30 14 36 -1 20 19 33 -1 26 15 14 -1 35 37 16 -1 5 4 18 -1 14 30 27 -1 10 24 28 -1 38 31 10 -1 37 35 34 -1 39 11 40 -1 20 33 2 -1 10 9 24 -1 33 15 2 -1 2 15 17 -1 31 38 40 -1 28 20 2 -1 26 28 2 -1 29 38 10 -1 24 20 28 -1 16 15 33 -1 34 41 42 -1 39 40 38 -1 5 20 24 -1 20 5 18 -1 1 0 15 -1 43 12 7 -1 2 17 0 -1 33 35 16 -1 19 18 34 -1 33 19 34 -1 1 15 26 -1 14 16 36 -1 7 6 13 -1 44 7 13 -1 18 22 45 -1 43 7 44 -1 11 32 31 -1 45 34 18 -1 34 45 41 -1 31 40 11 -1 25 12 46 -1 47 46 43 -1 12 8 7 -1 47 25 46 -1 47 43 44 -1 44 48 49 -1 12 43 46 -1 44 50 47 -1 44 49 50 -1 21 51 52 -1 53 54 22 -1 51 21 55 -1 21 52 53 -1 55 56 51 -1 53 52 54 -1 51 57 52 -1 58 45 54 -1 58 54 52 -1 54 45 22 -1 58 52 57 -1 59 45 58 -1 22 21 53 -1 55 21 4 -1 59 60 45 -1 60 59 61 -1 61 62 60 -1 63 62 61 -1 45 60 41 -1 64 65 66 -1 66 67 64 -1 67 68 69 -1 65 64 70 -1 64 69 70 -1 64 67 69 -1 70 69 68 -1 71 72 70 -1 57 73 74 -1 75 59 58 -1 57 51 73 -1 76 77 67 -1 67 66 76 -1 73 78 79 -1 78 73 51 -1 79 74 73 -1 80 79 66 -1 81 67 77 -1 51 56 76 -1 78 66 79 -1 66 65 80 -1 65 72 80 -1 57 74 58 -1 51 76 78 -1 58 74 75 -1 76 66 78 -1 82 75 80 -1 74 79 75 -1 79 80 75 -1 82 83 75 -1 83 82 84 -1 80 72 82 -1 85 86 83 -1 86 75 83 -1 75 86 59 -1 85 63 86 -1 63 59 86 -1 63 61 59 -1 87 88 84 -1 67 89 90 -1 67 90 68 -1 91 89 92 -1 92 93 91 -1 90 94 68 -1 68 95 71 -1 94 90 91 -1 95 68 94 -1 96 97 98 -1 96 98 91 -1 94 91 98 -1 89 91 90 -1 82 72 87 -1 70 72 65 -1 82 87 84 -1 93 96 91 -1 88 99 84 -1 95 94 100 -1 100 94 98 -1 98 88 100 -1 87 100 88 -1 95 72 71 -1 100 72 95 -1 72 100 87 -1 68 71 70 -1 88 98 97 -1 97 99 88 -1 93 101 97 -1 93 97 96 -1 83 84 102 -1 103 104 105 -1 106 107 108 -1 109 93 92 -1 106 110 111 -1 112 113 92 -1 114 101 108 -1 108 101 106 -1 102 85 83 -1 109 106 101 -1 114 115 116 -1 117 115 114 -1 111 118 106 -1 116 102 84 -1 107 119 117 -1 116 115 102 -1 108 107 117 -1 101 93 109 -1 115 119 102 -1 119 115 117 -1 106 109 110 -1 99 114 116 -1 114 99 101 -1 119 103 85 -1 109 92 110 -1 113 110 92 -1 107 104 119 -1 85 103 120 -1 121 106 118 -1 99 97 101 -1 99 116 84 -1 117 114 108 -1 102 119 85 -1 103 119 104 -1 106 104 107 -1 121 104 106 -1 104 121 105 -1 122 37 123 -1 36 16 37 -1 124 29 30 -1 124 36 122 -1 30 36 124 -1 36 37 122 -1 48 44 125 -1 48 125 126 -1 125 13 25 -1 125 44 13 -1 37 34 42 -1 127 128 129 -1 123 37 42 -1 128 130 129 -1 123 42 128 -1 129 130 131 -1 132 122 133 -1 134 133 127 -1 62 42 60 -1 133 128 127 -1 133 123 128 -1 132 133 134 -1 41 60 42 -1 42 62 130 -1 130 128 42 -1 123 133 122 -1 135 131 136 -1 135 137 127 -1 138 131 139 -1 135 127 129 -1 131 138 136 -1 135 136 137 -1 130 140 131 -1 129 131 135 -1 62 63 140 -1 141 139 120 -1 127 142 143 -1 140 130 62 -1 131 140 139 -1 139 140 63 -1 120 63 85 -1 63 120 139 -1 136 138 137 -1 137 142 127 -1 144 145 146 -1 147 148 149 -1 150 141 151 -1 103 105 120 -1 105 152 120 -1 113 144 147 -1 141 153 154 -1 111 110 147 -1 147 110 113 -1 146 148 147 -1 147 144 146 -1 151 141 152 -1 144 113 155 -1 148 150 149 -1 146 145 148 -1 147 118 111 -1 149 118 147 -1 148 153 150 -1 120 152 141 -1 145 153 148 -1 154 153 145 -1 154 138 141 -1 151 118 149 -1 150 151 149 -1 141 138 139 -1 150 153 141 -1 118 152 121 -1 152 118 151 -1 156 138 154 -1 105 121 152 -1 138 157 137 -1 158 159 160 -1 155 161 144 -1 162 145 144 -1 160 142 158 -1 161 155 159 -1 142 137 163 -1 163 137 157 -1 156 157 138 -1 163 164 158 -1 158 164 162 -1 161 162 144 -1 159 162 161 -1 158 142 163 -1 165 159 155 -1 166 156 154 -1 159 158 162 -1 167 168 161 -1 159 165 160 -1 168 167 161 -1 168 161 169 -1 161 168 169 -1 161 168 170 -1 168 161 170 -1 166 145 162 -1 166 162 164 -1 166 164 171 -1 171 164 163 -1 157 156 171 -1 157 171 163 -1 154 145 166 -1 156 166 171 -1 23 24 9 -1 39 172 173 -1 174 175 176 -1 177 174 176 -1 5 23 3 -1 11 39 9 -1 29 178 39 -1 179 180 3 -1 181 172 182 -1 181 182 172 -1 39 178 172 -1 23 9 173 -1 39 38 29 -1 172 183 39 -1 179 184 180 -1 172 39 183 -1 185 172 178 -1 186 173 172 -1 179 3 23 -1 186 179 173 -1 179 23 173 -1 186 172 185 -1 187 188 189 -1 190 188 187 -1 173 9 39 -1 175 191 176 -1 192 174 193 -1 25 47 194 -1 192 189 174 -1 182 194 47 -1 188 182 189 -1 188 194 182 -1 195 47 50 -1 195 182 47 -1 196 175 174 -1 50 49 196 -1 175 196 191 -1 195 196 174 -1 195 50 196 -1 49 191 196 -1 197 49 48 -1 174 189 195 -1 189 182 195 -1 174 177 176 -1 174 176 193 -1 198 55 180 -1 180 4 3 -1 199 56 198 -1 180 55 4 -1 198 56 55 -1 193 176 200 -1 192 197 189 -1 193 200 192 -1 201 202 189 -1 187 189 202 -1 197 191 49 -1 176 191 200 -1 200 191 197 -1 48 201 197 -1 200 197 192 -1 197 201 189 -1 203 204 205 -1 206 198 180 -1 204 203 207 -1 203 205 198 -1 56 208 76 -1 67 81 89 -1 208 199 209 -1 77 210 81 -1 211 208 209 -1 210 89 81 -1 77 208 210 -1 212 89 210 -1 211 210 208 -1 210 211 212 -1 92 89 212 -1 112 92 212 -1 56 199 208 -1 76 208 77 -1 213 212 209 -1 212 213 214 -1 214 113 112 -1 209 212 211 -1 212 214 112 -1 215 209 199 -1 215 199 204 -1 205 204 199 -1 204 213 215 -1 199 198 205 -1 215 213 209 -1 216 178 124 -1 184 179 186 -1 124 178 29 -1 185 178 217 -1 184 186 218 -1 216 124 132 -1 126 125 25 -1 126 25 194 -1 122 132 124 -1 219 220 190 -1 186 185 218 -1 217 178 216 -1 217 218 185 -1 220 126 188 -1 216 221 217 -1 219 201 220 -1 190 220 188 -1 48 126 220 -1 220 201 48 -1 126 194 188 -1 222 223 224 -1 225 226 227 -1 134 127 143 -1 228 229 187 -1 228 187 202 -1 226 132 134 -1 229 219 190 -1 227 134 143 -1 229 190 187 -1 222 230 229 -1 230 219 229 -1 228 222 229 -1 226 216 132 -1 134 227 226 -1 202 201 219 -1 219 230 202 -1 228 202 230 -1 230 223 228 -1 223 222 228 -1 224 223 222 -1 226 221 216 -1 222 223 230 -1 221 231 217 -1 184 218 232 -1 233 225 227 -1 206 184 232 -1 184 206 180 -1 231 218 217 -1 234 235 236 -1 234 236 237 -1 233 235 225 -1 206 238 239 -1 232 231 240 -1 236 235 233 -1 226 225 241 -1 241 235 242 -1 218 231 232 -1 207 234 243 -1 203 244 207 -1 203 206 239 -1 235 234 242 -1 240 206 232 -1 239 238 241 -1 207 245 234 -1 206 203 198 -1 240 231 221 -1 240 221 238 -1 206 240 238 -1 238 221 241 -1 239 241 242 -1 241 225 235 -1 241 221 226 -1 246 247 248 -1 214 246 248 -1 249 233 250 -1 247 165 248 -1 155 248 165 -1 143 233 227 -1 249 250 251 -1 213 246 214 -1 251 247 246 -1 233 143 250 -1 247 251 250 -1 252 250 143 -1 142 252 143 -1 252 142 160 -1 247 250 165 -1 250 252 165 -1 113 214 248 -1 113 248 155 -1 252 160 165 -1 237 251 243 -1 213 204 243 -1 249 251 236 -1 243 204 207 -1 213 243 246 -1 249 236 233 -1 234 237 243 -1 237 236 251 -1 251 246 243 -1 234 245 242 -1 245 207 244 -1 244 239 242 -1 245 244 242 -1 203 239 244 -1 26 14 27 -1 27 28 26 -1'>
          <Coordinate point='-0.000943995 0.0689017 -0.0376024 -0.00118228 0.0616203 -0.0581304 -0.0214695 0.0783272 -0.06536 -0.0189114 -0.0490728 0.0447381 -0.0842729 0.0409799 0.0774409 -0.0466713 0.0249733 0.0053506 0.0187419 0.0877924 0.0144186 0.000868552 0.0950275 0.00618857 0.0114409 0.0904486 -0.00569738 -0.00889921 0.00339803 -0.0333753 -0.0118947 0.0285698 -0.029825 -0.0167089 0.0200729 -0.00826473 0.013298 0.058244 -0.00129314 0.0277752 0.0608536 0.0289152 0.0122019 0.0704871 -0.0694725 -0.00355335 0.0907261 -0.0703019 0.0106234 0.112216 -0.0581624 -0.0175275 0.09203 -0.0482457 -0.0976619 0.111283 0.0253733 -0.0524453 0.114034 -0.0363695 -0.0324475 0.0908854 -0.0716502 -0.12709 0.0977929 0.0947255 -0.122714 0.112958 0.0591731 -0.00802163 -0.0301594 -0.0154339 -0.0192615 0.0193884 -0.0403114 0.0275634 0.0211174 0.01313 -0.00708321 0.063408 -0.0754462 0.0101627 0.0407309 -0.0623547 -0.0193564 0.0449255 -0.0647724 0.0271963 -0.00924413 -0.0279226 0.0233651 0.033085 -0.0481928 -0.008372 0.0300245 -0.00923948 -0.0240849 0.0551754 -0.0114337 -0.0169162 0.114647 -0.0756478 0.00613527 0.124583 0.00416012 0.0155273 0.113012 -0.0121744 0.0249281 0.0764663 -0.0302198 0.0451343 0.11233 0.022 -0.00105781 0.00300058 -0.00450569 -0.00343313 -0.0140808 0.00773364 -0.00957023 0.0066366 0.0131498 0.0105692 0.123162 0.0744194 0.0627107 0.128303 0.111294 0.00800518 0.0584532 0.0183333 0.021304 0.0373447 0.0382668 -0.0915547 0.114792 0.0844544 0.011157 0.0397557 0.0135884 0.0104825 -0.00150815 0.0320967 0.0360177 -0.0114115 0.0593873 0.012182 -0.00823205 0.0538736 0.00801034 -0.00446822 0.0424245 -0.18413 0.0896677 0.193125 -0.176856 0.108959 0.145995 -0.138552 0.107742 0.0869931 -0.151521 0.113867 0.109008 -0.101969 0.00447417 0.156208 -0.131705 -0.025717 0.2283 -0.200256 0.108051 0.189234 -0.155881 0.110214 0.186275 -0.102368 0.108552 0.235165 -0.0495846 0.116001 0.134329 -0.0379881 0.114874 0.203695 0.0420604 0.123853 0.171827 0.00118995 0.119446 0.276269 -0.3003 0.077596 0.380165 -0.284629 0.0920597 0.362656 -0.271452 0.085288 0.32324 -0.292662 0.0543244 0.383484 -0.275513 0.086517 0.416353 -0.307943 0.0882077 0.411323 -0.289652 0.0929595 0.394517 -0.255437 0.0989794 0.403018 -0.240357 0.0898245 0.392476 -0.222112 0.101186 0.229254 -0.218247 0.105566 0.23435 -0.154304 0.104587 0.257051 -0.211829 0.0218464 0.300485 -0.226934 0.000403536 0.340096 -0.218142 0.0766413 0.252071 -0.23936 0.103708 0.263723 -0.255528 0.099095 0.307963 -0.233354 0.00430552 0.35664 -0.175932 0.100293 0.35604 -0.0881486 0.112643 0.352017 -0.129235 0.102379 0.39521 -0.0257759 0.120014 0.354571 -0.0593622 0.113666 0.297388 -0.192489 0.0933475 0.393899 -0.160415 0.11565 0.412952 -0.217002 0.0188678 0.371319 -0.231631 0.0796254 0.413912 -0.197536 0.0934474 0.424127 -0.107729 0.041224 0.384801 -0.110812 0.0936557 0.421396 -0.22292 0.1012 0.41989 -0.246806 0.109539 0.411808 -0.147863 0.0971983 0.425209 -0.135681 0.113244 0.426665 -0.193533 0.11022 0.423444 -0.125373 0.113556 0.413205 -0.22109 0.107544 0.406188 -0.0767281 0.117658 0.428938 -0.0688025 0.116443 0.397338 0.00559179 0.126018 0.397334 0.0120863 0.120605 0.415609 0.0411118 0.128006 0.417215 -0.0152999 0.123912 0.436415 -0.00481942 0.107367 0.41298 -0.0297253 0.121724 0.421956 -0.062607 0.103522 0.42854 -0.012047 0.107435 0.433045 0.0386292 0.114308 0.443931 -0.0589301 0.00748678 0.362805 0.0501035 0.0403562 0.389104 -0.0736565 0.110369 0.416546 -0.0728374 0.091681 0.398712 -0.0937167 0.0952158 0.407875 -0.0355828 0.100196 0.408138 0.0487492 0.133554 0.446491 -0.0318326 0.119173 0.402254 0.0462978 0.127853 0.375811 0.0372528 0.135931 0.434055 0.054276 0.0595761 0.0359503 0.0772502 0.115749 0.087127 0.0472868 -0.0185112 -0.00321825 0.0402376 0.0177917 0.0431394 0.0439383 -0.00939286 0.0471936 0.156104 0.0686677 0.240629 0.116372 0.117186 0.1642 0.148651 0.11672 0.226279 0.101013 0.132805 0.183457 0.14493 0.13471 0.258331 0.0701189 -0.0187686 0.0570507 0.0861581 0.0542162 0.105958 0.10868 -0.0137341 0.141787 0.169388 0.120162 0.274042 0.180455 0.124234 0.310978 0.196973 0.121096 0.323945 0.192329 0.142287 0.356711 0.129748 0.13321 0.346221 0.0701728 0.126172 0.269074 0.113853 0.134732 0.414661 0.213481 0.0817584 0.355028 0.164145 -0.0185201 0.247185 0.147663 0.0961424 0.437417 0.188229 0.133867 0.463264 0.148869 0.114879 0.454575 0.0836216 0.1163 0.446875 0.139564 0.13714 0.456625 0.0841668 0.136678 0.453986 0.118375 0.139392 0.43946 0.0903975 0.1286 0.429856 0.0612221 0.131656 0.420615 0.15944 0.132244 0.441093 0.182955 0.142928 0.432674 0.174721 0.0163874 0.392044 0.213501 0.149854 0.424365 0.239093 0.142154 0.415187 0.24106 0.0846722 0.422458 0.229547 0.0504383 0.417609 0.226883 0.0253292 0.388581 0.216075 0.0780857 0.438685 0.241232 0.100973 0.454502 0.232945 0.112465 0.402894 0.232569 0.116975 0.432157 0.208267 -0.0228208 0.370421 0.212996 0.138175 0.443016 0.215627 0.075468 0.436087 0.217544 0.075468 0.436087 0.218506 0.07646 0.436794 0.218506 0.074482 0.435422 0.248369 0.14486 0.438912 0.0085611 -0.0454931 0.0214276 0.0067124 -0.043273 -0.00625313 -0.0115281 -0.015576 0.0413995 -0.0163089 0.0136094 0.0398544 -0.0161577 -0.0150252 0.0737869 -0.0231561 -0.0115081 0.0556958 0.0398376 -0.0698349 0.0101724 0.0184475 -0.0977828 0.0244641 -0.00339166 -0.11021 0.0920917 0.0152977 -0.0510789 0.0360958 0.0166674 -0.0350604 0.0385322 0.0028033 -0.019604 0.0222745 0.0415624 -0.157908 0.0610577 0.0297046 -0.094033 0.0465075 0.0311196 -0.105443 0.0352437 0.0316265 -0.0914299 0.0730117 0.0335883 -0.0397987 0.0323503 0.0173311 -0.0430611 0.0618774 0.0439877 -0.0866393 0.0525026 -0.00190458 -0.0140864 0.0689061 0.0065671 -0.0532894 0.0747067 -0.00587874 -0.0506366 0.0736421 0.0241656 -0.0208206 0.0217512 0.0087298 -0.0241593 0.0437504 0.00111814 -0.00659297 0.0464853 0.0169158 -0.0328776 0.0653233 -0.0293452 -0.137144 0.165727 -0.0906845 -0.130967 0.25783 -0.00086219 -0.0409531 0.0815044 0.0422462 -0.0445728 0.0694617 0.0415332 -0.0976449 0.0843048 0.0246399 -0.25196 0.19805 -0.0257716 -0.199059 0.240419 -0.0262426 -0.193977 0.220554 0.0542333 -0.224199 0.098275 0.0560113 -0.266973 0.207943 -0.167438 -0.0602412 0.310835 -0.10409 -0.120189 0.288197 -0.178133 -0.044371 0.332027 -0.133636 -0.0874499 0.309022 -0.106849 -0.0444927 0.331462 0.00143519 -0.137222 0.276938 0.028866 -0.0375959 0.338223 -0.0703519 -0.156642 0.265007 0.0622421 -0.0945797 0.0357788 0.0590824 -0.1335 0.0481543 0.0440855 -0.141216 0.0761414 0.0521721 -0.0757952 0.0738234 0.0436755 -0.0419476 0.0471678 0.0792661 -0.178214 0.0777428 0.0636243 -0.145035 0.0934682 0.0496612 -0.135037 0.0967914 0.0625105 -0.164395 0.10224 0.111845 -0.191869 0.16252 0.0918855 -0.111027 0.116287 0.132102 -0.0984472 0.196558 0.0460803 -0.129925 0.0878121 0.0517604 -0.116515 0.0713327 0.0573151 -0.116238 0.0905047 0.0582229 -0.181383 0.0876345 0.0556452 -0.195274 0.0870581 0.146643 -0.155288 0.227702 0.123054 -0.294091 0.20385 0.124989 -0.273757 0.188997 0.147502 -0.220308 0.232507 0.144448 -0.225128 0.244632 0.0834021 -0.242632 0.113412 0.0888169 -0.306205 0.144238 0.065001 -0.214172 0.104977 0.0971669 -0.256636 0.13144 0.111451 -0.324952 0.16513 0.0955412 -0.211884 0.245355 0.097666 -0.325226 0.161615 0.110124 -0.317859 0.186062 0.093747 -0.111793 0.30224 0.179404 -0.0946655 0.329507 0.141373 -0.0385743 0.354101 0.167603 -0.167113 0.270854 0.190537 -0.0964559 0.312029 0.164319 -0.162882 0.286263 0.204411 -0.0386086 0.337051'/>
        </IndexedFaceSet>
      </shape>
    </scene>
  </x3d>
    
    <span style="position:absolute; top:290px; left:520px;" 
          onmouseover="document.getElementById('colPick').color.showPicker();">
        Choose pen color: <br>&nbsp;<br>
        <input id="colPick" class="color" value="000000" onchange="pen_col = '#'+this.color.toString();">
    </span>
    
    <div id="ctrlContainer">
        <span>Choose pen size: </span><br>
        <div id="sliderContainer">
            <ul>
                <li>
                    <span style="width:100px; float:left; clear:both; padding:5px;" id="lSize">16</span>
                    <div id="sizeSlider" class="slider"></div>
                </li>
            </ul>
        </div>
    </div>
    
    <div style="position:absolute; top:50px; left:800px;">
        <br>&nbsp;<br>
        <span onmouseover="document.getElementById('bgcolPick').color.showPicker();">
            Choose background color: <br>&nbsp;<br>
            <input id="bgcolPick" class="color" value="000000" onchange="bg_col = '#'+this.color.toString();">
        </span>
        <br>&nbsp;<br>
        Clear image with background color: <br>&nbsp;<br>
        <button onclick="clearImage(bg_col);">Reset</button>
    </div>
    
  <script type="text/javascript" src="../lib/media/js/jscolor.js"></script>

    <script type="text/javascript" src="../lib/x3dom.js"></script>
        
    <script type="text/javascript" src="../lib/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="../lib/jquery-ui-1.11.3/jquery-ui.min.js"></script>
    
    <script>
    $(document).ready(function(){
        
        $(".slider").slider({min: 1, max: 24, step: 1, value: 16, animate: true,
                             range: false, slide: function(e, ui) {
            pen_size = ui.value;
            document.getElementById("lSize").innerHTML = pen_size;
        }});

    });
    </script>
    
</body>

</html>
